###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.3.4676/W32 for ARM      03/Feb/2017  14:16:35 #
# Copyright 1999-2013 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\Андрей\Google Диск\Stand_MNI\Модем\src\app.c    #
#    Command line =  "C:\Users\Андрей\Google Диск\Stand_MNI\Модем\src\app.c"  #
#                    -D USE_STDPERIPH_DRIVER -D STM32F4XX -D                  #
#                    USE_STM324xG_EVAL -D USE_USB_OTG_FS -lcN                 #
#                    "C:\Users\Андрей\Google Диск\Stand_MNI\Модем\STM324xG-EV #
#                    AL_USBD-FS\List\" -o "C:\Users\Андрей\Google             #
#                    Диск\Stand_MNI\Модем\STM324xG-EVAL_USBD-FS\Obj\"         #
#                    --debug --endian=little --cpu=Cortex-M4 -e --fpu=None    #
#                    --dlib_config "C:\Program Files (x86)\IAR                #
#                    Systems\Embedded Workbench 6.5\arm\INC\c\DLib_Config_Ful #
#                    l.h" -I "C:\Users\Андрей\Google Диск\Stand_MNI\Модем\"   #
#                    -I "C:\Users\Андрей\Google Диск\Stand_MNI\Модем\inc\"    #
#                    -I "C:\Users\Андрей\Google Диск\Stand_MNI\Модем\src\"    #
#                    -Ohs --use_c++_inline -I "C:\Program Files (x86)\IAR     #
#                    Systems\Embedded Workbench 6.5\arm\CMSIS\Include\"       #
#    List file    =  C:\Users\Андрей\Google Диск\Stand_MNI\Модем\STM324xG-EVA #
#                    L_USBD-FS\List\app.lst                                   #
#    Object file  =  C:\Users\Андрей\Google Диск\Stand_MNI\Модем\STM324xG-EVA #
#                    L_USBD-FS\Obj\app.o                                      #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Андрей\Google Диск\Stand_MNI\Модем\src\app.c
      1          /**
      2            ******************************************************************************
      3            * @file    app.c
      4            * @author  MCD Application Team
      5            * @version V1.1.0
      6            * @date    19-March-2012
      7            * @brief   This file provides all the Application firmware functions.
      8            ******************************************************************************
      9            * @attention
     10            *
     11            * <h2><center>&copy; COPYRIGHT 2012 STMicroelectronics</center></h2>
     12            *
     13            * Licensed under MCD-ST Liberty SW License Agreement V2, (the "License");
     14            * You may not use this file except in compliance with the License.
     15            * You may obtain a copy of the License at:
     16            *
     17            *        http://www.st.com/software_license_agreement_liberty_v2
     18            *
     19            * Unless required by applicable law or agreed to in writing, software 
     20            * distributed under the License is distributed on an "AS IS" BASIS, 
     21            * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     22            * See the License for the specific language governing permissions and
     23            * limitations under the License.
     24            *
     25            ******************************************************************************
     26            */ 
     27          
     28          /* Includes ------------------------------------------------------------------*/ 
     29          
     30          #include "usbd_cdc_core.h"
     31          #include "usbd_usr.h"
     32          #include "usb_conf.h"
     33          #include "usbd_desc.h"
     34          
     35            
     36          #ifdef USB_OTG_HS_INTERNAL_DMA_ENABLED
     37            #if defined ( __ICCARM__ ) /*!< IAR Compiler */
     38              #pragma data_alignment=4   
     39            #endif
     40          #endif /* USB_OTG_HS_INTERNAL_DMA_ENABLED */
     41             
     42          __ALIGN_BEGIN USB_OTG_CORE_HANDLE    USB_OTG_dev __ALIGN_END ;
     43          
     44          
     45          extern volatile uint8_t APP_Rx_Buffer [];
     46          extern volatile uint32_t APP_Rx_ptr_in;
     47          uint8_t mybyte = 0;
     48          
     49          void USB_CDC_buffer_write_byte(uint8_t byte);
     50          
     51          int main(void)
     52          {
     53            __IO uint32_t i = 0;  
     54          
     55            /*!< At this stage the microcontroller clock setting is already configured, 
     56            this is done through SystemInit() function which is called from startup
     57            file (startup_stm32fxxx_xx.s) before to branch to application main.
     58            To reconfigure the default setting of SystemInit() function, refer to
     59            system_stm32fxxx.c file
     60            */  
     61           
     62            USBD_Init(&USB_OTG_dev,
     63          #ifdef USE_USB_OTG_HS 
     64                      USB_OTG_HS_CORE_ID,
     65          #else            
     66                      USB_OTG_FS_CORE_ID,
     67          #endif  
     68                      &USR_desc, 
     69                      &USBD_CDC_cb, 
     70                      &USR_cb);
     71            
     72            /* Main loop */
     73            while (1)
     74            {
     75              if (i++ == 0x10000)
     76              {
     77                USB_CDC_buffer_write_byte(mybyte);
     78                mybyte++;
     79                i = 0;
     80              }
     81            }
     82          } 
     83          
     84          
     85          void USB_CDC_buffer_write_byte(uint8_t byte) {
     86            APP_Rx_Buffer[APP_Rx_ptr_in++] = byte;
     87            if(APP_Rx_ptr_in == APP_RX_DATA_SIZE)
     88            {
     89              APP_Rx_ptr_in = 0;
     90            }
     91          }
     92          
     93          
     94          
     95          
     96          
     97          
     98          #ifdef USE_FULL_ASSERT
     99          /**
    100          * @brief  assert_failed
    101          *         Reports the name of the source file and the source line number
    102          *         where the assert_param error has occurred.
    103          * @param  File: pointer to the source file name
    104          * @param  Line: assert_param error line source number
    105          * @retval None
    106          */
    107          void assert_failed(uint8_t* file, uint32_t line)
    108          {
    109            /* User can add his own implementation to report the file name and line number,
    110            ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
    111            
    112            /* Infinite loop */
    113            while (1)
    114            {}
    115          }
    116          #endif
    117          
    118          /**
    119            * @}
    120            */ 
    121          
    122          
    123          /**
    124            * @}
    125            */ 
    126          
    127          
    128          /**
    129            * @}
    130            */ 
    131          
    132          /************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   USB_CDC_buffer_write_byte
      16   main
        16   -> USBD_Init


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_2
       4  ??DataTable1_3
       4  ??DataTable1_4
       4  ??DataTable1_5
      26  USB_CDC_buffer_write_byte
      74  main
    1528  mybyte
          USB_OTG_dev

 
 1 528 bytes in section .bss
   124 bytes in section .text
 
   124 bytes of CODE memory
 1 528 bytes of DATA memory

Errors: none
Warnings: none
